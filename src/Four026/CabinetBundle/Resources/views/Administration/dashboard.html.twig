{% extends "Four026CabinetBundle:Default:bootstrap_base.html.twig" %}

{% block main_content %}

<div class="jumbotron">
    <div class="container">
        <h1>Double-Cross admin site</h1>
        <p>Welcome, {{ user.username }}</p>
    </div>
</div>

<div class='container'>

    <!-- Users -->
    <h1>{{ users|length }} <small>Users</small></h1>
    <div class="row">
        {% for user in users %}
        <div class='col-xs-6 col-sm-3'>
            <h4>{{ user.username }}</h4>

            <ul class="list-group">
                {% for document in documents %}
                    <li class="list-group-item">
                        {{ document.name }}
                        {% if (document.id not in user.UnlockedDocumentIds) %}
                            <a class="btn btn-xs btn-default pull-right" title="Unlock"
                               href="{{ path('unlock_document', {'user_id' : user.id, 'document_id' : document.id }) }}">
                                <span class="glyphicon glyphicon-thumbs-up"></span>
                            </a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>

        </div>
        {% endfor %}
    </div>

    <hr />

    <!-- Documents -->
    <h1>
        {{ documents|length }}
        <small>Documents</small>
        <a href="{{ path('show_create_document_form') }}" class="btn btn-primary">
            <span class="glyphicon glyphicon-file"></span>
            Create new document
        </a>
    </h1>

    <div class="panel-group">
        {% for document in documents %}
        <div class='panel panel-default'>
            <div class="panel-heading">
                <h3 class="panel-title">{{ document.name }}</h3>
            </div>
            <div class="panel-body">
                {% autoescape false %}
                {{ document.bodyText }}
                {% endautoescape %}
            </div>
        </div>
        {% endfor %}
    </div>

    <hr />

    <!-- Notes -->
    <h1>
        {{ notes|length }}
        <small>Notes</small>
        <a href="{{ path('show_create_note_form') }}" class="btn btn-primary">
            <span class="glyphicon glyphicon-file"></span>
            Create new note
        </a>
    </h1>

    <div class="panel-group">
        {% for note in notes %}
            <div class='panel panel-default'>
                <div class="panel-heading">
                    <h3 class="panel-title">{{ note.name }}</h3>
                </div>
                <div class="panel-body">
                    {% autoescape false %}
                    {{ note.bodyText }}
                    {% endautoescape %}
                </div>
            </div>
        {% endfor %}
    </div>

</div>
{% endblock %}